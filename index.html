[file name]: index.html
[file content begin]
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SGA - SystÃ¨me Gestion Agents</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icons/icon-72x72.png">
    <meta name="theme-color" content="#2c3e50">
    <!-- CDN pour export Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <!-- En-tÃªte -->
    <header class="app-header">
        <div class="header-content">
            <h1>ğŸ“‹ SYSTEME DE GESTION DES AGENTS</h1>
            <p class="subtitle" id="pageSubtitle">Menu Principal</p>
        </div>
        <div class="header-actions">
            <button id="backBtn" class="btn-icon" title="Retour" style="display:none">â†</button>
            <button id="syncBtn" class="btn-icon" title="Synchroniser">ğŸ”„</button>
            <button id="themeBtn" class="btn-icon" title="Changer thÃ¨me">ğŸŒ™</button>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="horizontal-nav" id="topNav">
        <button class="nav-tab active" data-page="menu">ğŸ  Accueil</button>
        <button class="nav-tab" data-page="agents">ğŸ‘¥ Agents</button>
        <button class="nav-tab" data-page="planning">ğŸ“… Planning</button>
        <button class="nav-tab" data-page="stats">ğŸ“Š Stats</button>
        <button class="nav-tab" data-page="radios">ğŸ“» Radios</button>
        <button class="nav-tab" data-page="panique">ğŸš¨ Panique</button>
        <button class="nav-tab" data-page="habillement">ğŸ‘• Habillement</button>
        <button class="nav-tab" data-page="avertissements">âš ï¸ Avertissements</button>
        <button class="nav-tab" data-page="conges">ğŸ–ï¸ CongÃ©s</button>
        <button class="nav-tab" data-page="outils">ğŸ› ï¸ Outils</button>
    </nav>

    <!-- Contenu principal -->
    <main class="main-content">
        <!-- Pages -->
        <div id="pageMenu" class="page active">
            <div class="menu-grid">
                <!-- Contenu gÃ©nÃ©rÃ© par JavaScript -->
            </div>
        </div>

        <div id="pageAgents" class="page">
            <div class="page-content" id="agentsContent"></div>
        </div>
        
        <div id="pagePlanning" class="page">
            <div class="page-content" id="planningContent"></div>
        </div>
        
        <div id="pageStats" class="page">
            <div class="page-content" id="statsContent"></div>
        </div>
        
        <div id="pageRadios" class="page">
            <div class="page-content" id="radiosContent"></div>
        </div>
        
        <div id="pagePanique" class="page">
            <div class="page-content" id="paniqueContent"></div>
        </div>
        
        <div id="pageHabillement" class="page">
            <div class="page-content" id="habillementContent"></div>
        </div>
        
        <div id="pageAvertissements" class="page">
            <div class="page-content" id="avertissementsContent"></div>
        </div>
        
        <div id="pageConges" class="page">
            <div class="page-content" id="congesContent"></div>
        </div>
        
        <div id="pageOutils" class="page">
            <div class="page-content" id="outilsContent"></div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="app-footer">
        <div class="footer-info">
            <span id="dbInfo">Base: Chargement...</span>
            <span id="syncStatus">âš¡ En ligne</span>
        </div>
        <div class="footer-version">
            SGA PWA v1.0 | Â© 2024
        </div>
    </footer>

    <!-- Modal -->
    <div id="modalOverlay" class="modal-overlay" style="display:none"></div>
    <div id="modalContainer" class="modal-container" style="display:none"></div>

    <!-- Scripts - ORDRE CRITIQUE -->
    <script src="database.js"></script>
    <script src="planning-engine.js"></script>
    <script src="export-utils.js"></script>
    
    <!-- DÃ©finir les classes globales AVANT app.js -->
    <script>
        // Assurer que les classes sont disponibles globalement
        if (typeof window !== 'undefined') {
            if (typeof DatabaseManager === 'undefined') {
                // Si DatabaseManager n'est pas dÃ©fini, le crÃ©er Ã  partir de SGA_Database
                window.DatabaseManager = class DatabaseManager extends SGA_Database {
                    constructor() {
                        super();
                    }
                };
            }
            
            // CrÃ©er une instance globale de la base de donnÃ©es
            window.dbInstance = new (window.DatabaseManager || SGA_Database)();
            
            // Exporter Ã©galement les classes pour compatibilitÃ©
            window.DatabaseManager = window.DatabaseManager || SGA_Database;
            window.PlanningEngine = window.PlanningEngine || PlanningEngine;
            window.ExportUtils = window.ExportUtils || ExportUtils;
        }
    </script>
    
    <script src="app.js"></script>

    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('âœ… Service Worker enregistrÃ© avec succÃ¨s:', registration.scope);
                    })
                    .catch(err => {
                        console.error('âŒ Erreur enregistrement Service Worker:', err);
                    });
            });
        }
    </script>
    
    <!-- Script de diagnostic amÃ©liorÃ© -->
    <script>
        console.log('=== DIAGNOSTIC SGA PWA ===');
        console.log('Page chargÃ©e:', new Date().toLocaleString());
        
        // VÃ©rifier l'ordre des scripts chargÃ©s
        window.addEventListener('load', function() {
            console.log('=== VERIFICATION DES COMPOSANTS ===');
            
            const classesToCheck = [
                { name: 'SGA_Database', global: 'SGA_Database' },
                { name: 'DatabaseManager', global: 'DatabaseManager' },
                { name: 'PlanningEngine', global: 'PlanningEngine' },
                { name: 'ExportUtils', global: 'ExportUtils' },
                { name: 'SGA_App', global: 'SGA_App' }
            ];
            
            let allOk = true;
            classesToCheck.forEach(cls => {
                const exists = typeof window[cls.global] !== 'undefined';
                console.log(`${exists ? 'âœ…' : 'âŒ'} ${cls.name}: ${exists ? 'DÃ‰FINI' : 'INDÃ‰FINI'}`);
                if (!exists) allOk = false;
            });
            
            // VÃ©rifier IndexedDB
            if (!window.indexedDB) {
                console.error('âŒ IndexedDB NON SUPPORTÃ‰ par ce navigateur');
                allOk = false;
            } else {
                console.log('âœ… IndexedDB supportÃ©');
            }
            
            // VÃ©rifier Service Worker
            if (!navigator.serviceWorker) {
                console.warn('âš ï¸ Service Worker non supportÃ©');
            } else {
                console.log('âœ… Service Worker supportÃ©');
            }
            
            if (allOk) {
                console.log('ğŸ‰ TOUS LES COMPOSANTS SONT PRÃŠTS');
                
                // VÃ©rifier si l'application s'est initialisÃ©e
                setTimeout(() => {
                    if (window.sgaApp && typeof window.sgaApp.initialize === 'function') {
                        console.log('âœ… Application SGA prÃªte');
                    } else {
                        console.error('âŒ Application SGA non initialisÃ©e');
                    }
                }, 1000);
            } else {
                console.error('âŒ DES COMPOSANTS MANQUENT - VÃ©rifiez l\'ordre des scripts');
                
                // Afficher un message Ã  l'utilisateur
                setTimeout(() => {
                    const errorDiv = document.createElement('div');
                    errorDiv.id = 'debugPanel';
                    errorDiv.innerHTML = `
                        <h4>âš ï¸ ProblÃ¨me de chargement</h4>
                        <p>Certains composants ne se sont pas chargÃ©s correctement.</p>
                        <button onclick="location.reload()">ğŸ”„ Recharger</button>
                        <button onclick="localStorage.clear(); location.reload()">ğŸ§¹ RÃ©initialiser cache</button>
                    `;
                    document.body.appendChild(errorDiv);
                }, 2000);
            }
        });
    </script>
</body>
</html>
[file content end]
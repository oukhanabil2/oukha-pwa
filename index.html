<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SGA - SystÃ¨me Gestion Agents</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icons/icon-72x72.png">
    <meta name="theme-color" content="#2c3e50">
</head>
<body>
    <!-- En-tÃªte -->
    <header class="app-header">
        <div class="header-content">
            <h1>ğŸ“‹ SYSTEME DE GESTION DES AGENTS</h1>
            <p class="subtitle" id="pageSubtitle">Menu Principal</p>
        </div>
        <div class="header-actions">
            <button id="backBtn" class="btn-icon" title="Retour" style="display:none">â†</button>
            <button id="syncBtn" class="btn-icon" title="Synchroniser">ğŸ”„</button>
            <button id="themeBtn" class="btn-icon" title="Changer thÃ¨me">ğŸŒ™</button>
            <button id="installBtn" class="btn-icon" title="Installer l'app" style="display:none">ğŸ“±</button>
        </div>
    </header>

    <!-- Navigation horizontale (pour mobile) -->
    <nav class="horizontal-nav" id="topNav">
        <button class="nav-tab active" data-page="menu">ğŸ  Accueil</button>
        <button class="nav-tab" data-page="agents">ğŸ‘¥ Agents</button>
        <button class="nav-tab" data-page="planning">ğŸ“… Planning</button>
        <button class="nav-tab" data-page="stats">ğŸ“Š Stats</button>
        <button class="nav-tab" data-page="radios">ğŸ“» Radios</button>
        <button class="nav-tab" data-page="panique">ğŸš¨ Panique</button>
        <button class="nav-tab" data-page="habillement">ğŸ‘• Habillement</button>
        <button class="nav-tab" data-page="avertissements">âš ï¸ Avertissements</button>
        <button class="nav-tab" data-page="conges">ğŸ–ï¸ CongÃ©s</button>
        <button class="nav-tab" data-page="outils">ğŸ› ï¸ Outils</button>
    </nav>

    <!-- Contenu principal -->
    <main class="main-content">
        <!-- Page d'accueil -->
        <div id="pageMenu" class="page active">
            <div class="menu-grid">
                <!-- Les 10 boutons principaux comme dans Android.py -->
            </div>
        </div>

        <!-- Pages spÃ©cifiques -->
        <div id="pageAgents" class="page">
            <div class="page-content" id="agentsContent"></div>
        </div>
        
        <div id="pagePlanning" class="page">
            <div class="page-content" id="planningContent"></div>
        </div>
        
        <div id="pageStats" class="page">
            <div class="page-content" id="statsContent"></div>
        </div>
        
        <div id="pageRadios" class="page">
            <div class="page-content" id="radiosContent"></div>
        </div>
        
        <div id="pagePanique" class="page">
            <div class="page-content" id="paniqueContent"></div>
        </div>
        
        <div id="pageHabillement" class="page">
            <div class="page-content" id="habillementContent"></div>
        </div>
        
        <div id="pageAvertissements" class="page">
            <div class="page-content" id="avertissementsContent"></div>
        </div>
        
        <div id="pageConges" class="page">
            <div class="page-content" id="congesContent"></div>
        </div>
        
        <div id="pageOutils" class="page">
            <div class="page-content" id="outilsContent"></div>
        </div>
    </main>

    <!-- Footer avec info -->
    <footer class="app-footer">
        <div class="footer-info">
            <span id="dbInfo">Base: Chargement...</span>
            <span id="syncStatus">âš¡ En ligne</span>
        </div>
        <div class="footer-version">
            SGA PWA v1.0 | Â© 2024
        </div>
    </footer>

    <!-- Modals et popups -->
    <div id="modalOverlay" class="modal-overlay"></div>
    <div id="modalContainer" class="modal-container"></div>

    <!-- Toast notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="database.js"></script>
    <script src="planning-engine.js"></script>
    <script src="export-utils.js"></script>
    <script src="app.js"></script>

    <!-- Initialisation -->
    <script>
        // Initialisation de l'application
        document.addEventListener('DOMContentLoaded', () => {
            window.sgaApp = new SGA_App();
        });

        // Service Worker pour PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(reg => console.log('Service Worker enregistrÃ©'))
                .catch(err => console.log('Erreur SW:', err));
        }
        <!-- Dans index.html -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

        // Gestion installation PWA
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installBtn').style.display = 'block';
        });

        document.getElementById('installBtn')?.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    console.log('PWA installÃ©e');
                }
                deferredPrompt = null;
                document.getElementById('installBtn').style.display = 'none';
            }
        });
        <!-- Debug Panel (Ã  retirer en production) -->
<div id="debugPanel" style="position:fixed; bottom:10px; right:10px; background:red; color:white; padding:10px; z-index:9999; display:none;">
  <button onclick="checkDB()">Check DB</button>
  <button onclick="clearAll()">Clear All</button>
  <div id="debugInfo"></div>
</div>

<script>
// Afficher le panel debug
setTimeout(() => {
  document.getElementById('debugPanel').style.display = 'block';
}, 2000);

async function checkDB() {
  const info = document.getElementById('debugInfo');
  try {
    info.innerHTML = 'Checking...';
    
    // VÃ©rifier l'instance
    info.innerHTML += `<br>âœ… sgaDB existe: ${window.sgaDB ? 'OUI' : 'NON'}`;
    
    // VÃ©rifier la connexion
    const stats = await sgaDB.obtenirStatsGlobales();
    info.innerHTML += `<br>âœ… Stats: ${JSON.stringify(stats)}`;
    
    // VÃ©rifier les agents
    const agents = await sgaDB.listerAgents();
    info.innerHTML += `<br>âœ… Agents: ${agents.length}`;
    
  } catch (error) {
    info.innerHTML += `<br>âŒ Error: ${error.message}`;
  }
}

async function clearAll() {
  if (confirm('Tout effacer ?')) {
    await sgaDB.reinitialiser();
    localStorage.clear();
    location.reload();
  }
}
</script>
        
    
</body>
</html>
